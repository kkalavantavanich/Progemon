package graphic;

import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.List;

import javax.imageio.ImageIO;

import logic.character.Pokemon;
import logic.terrain.FightMap;
import logic.terrain.FightTerrain;

public class DrawingUtility {

	public static void drawFightMap(FightMap fightMap) {
		for (FightTerrain[] fightTerrains : fightMap.getMap()) {
			for (FightTerrain fightTerrain : fightTerrains) {
				fightTerrain.draw();
			}
		}
	}

	public static void drawFightTerrain(FightTerrain fightTerrain) {
		BufferedImage img = null;
		try {
			img = ImageIO.read(new File(fightTerrain.getType().getImageName()));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		ScreenComponent.g2.drawImage(img, null, fightTerrain.getX() * 40, fightTerrain.getY() * 40);
	}

	public static void drawPokemon(Pokemon pokemon) {
		if (pokemon.getCurrentFightTerrain() == null) {
			return;
		}
		int x = pokemon.getCurrentFightTerrain().getX();
		int y = pokemon.getCurrentFightTerrain().getY();
		BufferedImage img = null;
		try {
			img = ImageIO.read(new File(pokemon.getImageName()));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		ScreenComponent.g2.drawImage(img, null, x * 40, y * 40);
		/*
		 * Image img = new ImageIcon(pokemon.getImageName()).getImage();
		 * ScreenComponent.g2.drawImage(img, pokemon.getX() * 40, pokemon.getY()
		 * * 40, 40, 40, null);
		 */
		ScreenComponent.g2.setColor(Color.RED);
		ScreenComponent.g2.fillRect(x * 40 + 5, y * 40 + 32, 30, 6);
		ScreenComponent.g2.setColor(Color.GREEN);
		ScreenComponent.g2.fillRect(x * 40 + 5, y * 40 + 32, (int) (pokemon.getCurrentHP() * 30 / pokemon.getFullHP()),
				6);
	}

	public static void drawDialogBox() {
		BufferedImage img = null;
		try {
			img = ImageIO.read(new File(DialogBox.DIALOG_BOX_PATH));
		} catch (IOException e) {
			e.printStackTrace();
		}
		ScreenComponent.g2.drawImage(img, null, DialogBox.getX(), DialogBox.getY());
		ScreenComponent.g2.clipRect(0, 260, 320, 60);
		ScreenComponent.g2.setColor(Color.BLACK);
		ScreenComponent.g2.setFont(DialogBox.getFont());
		int messageHeight = ScreenComponent.g2.getFontMetrics(DialogBox.getFont()).getHeight();
		ScreenComponent.g2.drawString(DialogBox.getMessageOnScreen()[0], DialogBox.getX() + 20,
				DialogBox.getY() + 12 + messageHeight - DialogBox.getyShift());
		ScreenComponent.g2.drawString(DialogBox.getMessageOnScreen()[1], DialogBox.getX() + 20,
				DialogBox.getY() + 37 + messageHeight - DialogBox.getyShift());
		ScreenComponent.g2.setClip(null);
	}

	public static void drawQueueBox() {
		BufferedImage img = null;
		try {
			img = ImageIO.read(new File(QueueBox.QUEUE_BOX_PATH));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		ScreenComponent.g2.drawImage(img, null, QueueBox.getX(), QueueBox.getY());
		ScreenComponent.g2.drawRect(326, 18, 68, 284);
		List<Pokemon> pokemonsOnMap = QueueBox.getFightMap().getPokemonsOnMap();
		for (int i = 0; i < pokemonsOnMap.size(); i++) {
			try {
				img = ImageIO.read(new File(pokemonsOnMap.get(i).getImageName()));
			} catch (IOException e) {
				e.printStackTrace();
			}
			if (pokemonsOnMap.get(i).getOwner().getName() == "AI 1") {
				ScreenComponent.g2.setColor(Color.BLUE);
			} else {
				ScreenComponent.g2.setColor(Color.RED);
			}
			ScreenComponent.g2.fillRect(332, 22 + i * 40, 6, 36);
			ScreenComponent.g2.setColor(Color.BLACK);
			ScreenComponent.g2.setFont(DialogBox.getFont());
			int messageHeight = ScreenComponent.g2.getFontMetrics(DialogBox.getFont()).getHeight();
			ScreenComponent.g2.drawString("Lv." + pokemonsOnMap.get(i).getLevel(), 350, 35 + i * 40 + messageHeight);

			// pixel error test
//			ScreenComponent.g2.setColor(Color.BLUE);
//			ScreenComponent.g2.fillRect(326, 450, 68, 40);
//			ScreenComponent.g2.setColor(Color.RED);
//			ScreenComponent.g2.fillRect(326, 490, 68, 40);
//			ScreenComponent.g2.setColor(Color.GREEN);
//			ScreenComponent.g2.fillRect(326, 530, 68, 40);
//			ScreenComponent.g2.setColor(Color.BLACK);
//			ScreenComponent.g2.drawRect(326, 450, 68, 40);
//			ScreenComponent.g2.drawRect(326, 490, 68, 40);
//			ScreenComponent.g2.drawRect(326, 530, 68, 40);

			ScreenComponent.g2.drawImage(img, null, 326, 20 + i * 40);
		}
		ScreenComponent.g2.setClip(null);

		// gif test
		/*
		 * Image img2 = new
		 * ImageIcon("load\\img\\pokemon\\Dratini.gif").getImage();
		 * ScreenComponent.g2.drawImage(img2, 0, 0, 40, 40, null);
		 */
	}

}
